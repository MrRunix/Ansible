# Ansible

## lab намбер 4

> Само задание:
 + На серверах rrobin, web1, web2 установить nginx.
 + На серверах web1, web2 Nginx должен работать по порту 8080 и отдавать кастомную страницу, зайдя на которую можно понять на каком сервере вы находитесь.
 + На сервере rrobin Nginx должен обеспечить балансировку нагрузки серверов web1 и web2 в режиме round-robin. Вес каждого сервера одинаковый.
 + Установка и настройка всего ПО должна быть обеспечена Ansible-сценарием.
 + Все файлы по этому заданию выложить в Github и написать ReadMe со скринами работоспособности и инструкцию по запуску вашего Ansible-сценария


##
> Типо последовательность действий:
 + Создаём директорию и в ней папку task_4
 + добавляем туда vagrantfile
 + создаём  файл hosts, где распределяем вебсервера на группы и указываем их ip или домен (можно также указать, по какому порту будет происходить подключение через http)
 + cоздаём папки ролей и прописываем tasks для них
 + прописываем nginx.yml для настройки его на каждом вебсервере
 + прописываем manul.yml для выполнения задач и их порядка
 + Открываем Vagrantfile
 + меняем 39-ую строчку `ssh_pub_key = File.readlines("/home/runix/.ssh/id_rsa.pub").first.strip`
 + +  указываем путь до ключа
 + Пишем в консольке `vagrant up`  чтобы подднять виртуалки
 + Далее прописываем в консольке `ansible-playbook manul.yml`
 + Если всё успешно, то летсгоу то [192.168.11.113](http://192.168.11.113/)
 + если каждый раз после обновления сервера меняются, всё окк)
 
> Заходим и видим:
![wed1](https://github.com/MrRunix/Ansible/blob/main/task_4/screenshots/Screenshot%202022-04-06%20at%2017-25-07%20Welcome%20to%20CentOS.png)

> После обновления:
![web2](https://github.com/MrRunix/Ansible/blob/main/task_4/screenshots/Screenshot%202022-04-06%20at%2017-35-00%20Welcome%20to%20CentOS.png)
+ Если всё работает, давай до свидания ;)
